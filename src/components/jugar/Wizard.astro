---
import SetCategories from './SetCategories.tsx';
import StepPlayers from "./StepPlayers.astro";
import StepSummary from "./StepSummary.astro";
const {pasoDeJuego} = Astro.params
const step = parseInt(pasoDeJuego)
---

<div id="wizard-container">
  <!-- Indicador de pasos -->
  <div class="mb-12">
    <div class="flex justify-between items-center max-w-4xl mx-auto">
      {['Jugadores', 'Categorías', 'Resumen'].map((stepLabel, index) => {
        const stepNumber = index + 1;
        let stepClass = "step-indicator w-12 h-12 rounded-full border-2 p-2 border-gray-300 flex items-center justify-center font-bold text-gray-500 mb-2 transition-all duration-300";
        
        if (step === stepNumber) {
          stepClass += " step-active";
        } else if (step > stepNumber) {
          stepClass += " step-completed";
        }
        
        return (
          <div key={stepLabel} class="flex flex-col items-center" style={`flex: 1;`}>
            <div 
              class={stepClass}
              data-step={stepNumber}
            >
              {step > stepNumber ? (
                <span class="step-checkmark">✓</span>
              ) : (
                <span class="step-number">{stepNumber}</span>
              )}
            </div>
            <span class="step-label text-sm font-medium text-gray-600 text-center hidden md:block">
              {stepLabel}
            </span>
          </div>
        );
      })}
    </div>
  </div>
  
  <!-- Contenido de los pasos -->
  <div class="max-w-4xl mx-auto">
    <!-- Paso 1: Jugadores -->
    {step === 1 && (
      <div class="step-content">
        <StepPlayers />
      </div>
    )}
    
    <!-- Paso 2: Categorías -->
    {step === 2 && (
      <div class="step-content">
        <SetCategories client:only />
      </div>
    )}
    
    <!-- Paso 3: Resumen -->
    {step === 3 && (
      <div class="step-content">
        <StepSummary />
      </div>
    )}
    
    <!-- Botones de navegación -->
    <div class="flex justify-between mt-12 pt-8 border-t border-gray-200">
      <a 
        id="prevBtn"
        href={`/configurar-juego/${step - 1}`}
        class={`btn border-2 border-gray-300 text-gray-700 hover:bg-gray-50 px-8 ${step <= 1 ? 'pointer-events-none text-transparent' : ''}`}
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Anterior
      </a>
      
      {step < 3 ? (
        <a 
          id="nextBtn"
          href={`/configurar-juego/${step + 1}`}
          class="btn bg-gradient-to-r flex py-2 from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 px-8"
        >
          Siguiente
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      ) : (
        <a 
          id="startBtn"
          href="/game-start"
          class="btn bg-gradient-to-r flex py-2 from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 px-8"
        >
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Empezar a jugar
        </a>
      )}
    </div>
  </div>
</div>

<style>
  .step-indicator {
    transition: all 0.3s ease;
    border-color: #d1d5db !important;
    color: #6b7280;
  }
  
  .step-indicator.step-active {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    border-color: transparent !important;
    color: white;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }
  
  .step-indicator.step-completed {
    background-color: #10b981;
    border-color: transparent !important;
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  }
  
  .step-checkmark {
    font-weight: bold;
  }
  
  .hidden {
    display: none !important;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 2rem;
    border-radius: 0.75rem;
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 2px solid transparent;
  }
  
  .btn:hover {
    transform: translateY(-2px);
  }
</style>