---
import GameInfo from '../components/GameInfo.astro';
import Hero from '../components/Hero.astro';
import MechanicCard from '../components/MechanicCard.astro';
import RestrictionCard from '../components/RestrictionCard.astro';
import RoleCard from '../components/RoleCard.astro';
import Layout from '../layouts/Layout.astro';

// Importar datos
import gameData from '../data/gameData.json';
import mechanicsData from '../data/mechanics.json';
import restrictionsData from '../data/restrictions.json';
import rolesData from '../data/roles.json';
---

<Layout title="Impostor Game">
  <!-- Hero Section -->
  <Hero 
    title={gameData.meta.title}
    tagline={gameData.meta.tagline}
    description={gameData.meta.description}
  />
  
  <!-- Game Info Section -->
  <GameInfo 
    title="Sobre el Juego"
    description={gameData.meta.description}
    features={gameData.meta.features}
  />
  
  <!-- Mechanics Section -->
<section id="mechanics" class="py-20 bg-white bg-gradient-to-br dark:from-gray-900 dark:via-gray-800 dark:to-gray-900">
  <div class="container mx-auto px-4">
    <!-- Header mejorado con diseño visual -->
    <div class="text-center max-w-3xl mx-auto mb-12">
      <div class="inline-flex items-center justify-center gap-3 mb-6">
        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-2xl flex items-center justify-center">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
        </div>
        <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent">
          {mechanicsData.title}
        </h2>
      </div>
      
      <p class="text-xl text-gray-600 dark:text-gray-300 leading-relaxed">
        {mechanicsData.subtitle}
      </p>
      
      <!-- Línea decorativa -->
      <div class="mt-8 flex justify-center">
        <div class="w-24 h-1 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400 dark:from-blue-500 dark:via-purple-600 dark:to-pink-500 rounded-full"></div>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {mechanicsData.mechanics.map(mechanic => (
        <MechanicCard mechanic={mechanic} />
      ))}
    </div>
  </div>
</section>
  
 <!-- Roles Section -->
<section id="roles" class="py-20 bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800">
  <div class="container mx-auto px-4">
    <!-- Header mejorado -->
    <div class="text-center max-w-4xl mx-auto mb-16">
      <div class="inline-flex items-center gap-3 mb-6">
        <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 dark:from-purple-400 dark:to-pink-400 bg-clip-text text-transparent">
          {rolesData.title}
        </h2>
      </div>
      
      <p class="text-xl text-gray-600 dark:text-gray-300 leading-relaxed mb-10">
        {rolesData.subtitle}
      </p>
      
      <!-- Líneas decorativas -->
      <div class="mt-8 flex justify-center">
        <div class="w-24 h-1 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400 dark:from-blue-500 dark:via-purple-600 dark:to-pink-500 rounded-full"></div>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {rolesData.roles.map(role => (
        <RoleCard role={role} />
      ))}
    </div>
    
  </div>
</section>
  
  <!-- Restrictions Section -->
<section id="restrictions" class="py-20 bg-gradient-to-br from-white via-gray-50 to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900">
  <div class="container mx-auto px-4">
    <!-- Header mejorado -->
    <div class="text-center max-w-4xl mx-auto mb-16">
      <div class="inline-flex items-center gap-3 mb-6">
        <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 dark:from-purple-400 dark:to-pink-400 bg-clip-text text-transparent">
          {restrictionsData.title}
        </h2>
      </div>
      
      <p class="text-xl text-gray-600 dark:text-gray-300 leading-relaxed mb-10">
        {restrictionsData.subtitle}
      </p>
      
      <!-- Líneas decorativas -->
      <div class="mt-8 flex justify-center">
        <div class="w-24 h-1 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400 dark:from-blue-500 dark:via-purple-600 dark:to-pink-500 rounded-full"></div>
      </div>
    </div>
    
    <!-- Grid de tarjetas -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
      {restrictionsData.restrictions.map((restriction, index) => (
        <div class={`
          transform transition-all duration-500
          ${index % 3 === 1 ? 'md:translate-y-4' : ''}
          ${index % 3 === 2 ? 'lg:translate-y-8' : ''}
        `}>
          <RestrictionCard restriction={restriction} />
        </div>
      ))}
    </div>
    
  </div>
</section>
  
  <!-- CTA Section -->
<section class="py-24 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 dark:from-blue-700 dark:via-purple-800 dark:to-gray-900">
  
  
  <div class="container relative mx-auto px-4 text-center">
    
    
    <!-- Título principal -->
    <h2 class="text-3xl md:text-6xl font-bold text-white mb-6 leading-tight">
      ¿Listo para<br/>
      <span class="bg-gradient-to-r from-yellow-300 via-pink-300 to-cyan-300 bg-clip-text text-transparent">
        descubrir al impostor?
      </span>
    </h2>
    
    <!-- Subtítulo -->
    <p class="text-xl text-blue-100 dark:text-blue-200 mb-10 max-w-3xl mx-auto leading-relaxed">
      Unite a miles de jugadores en esta aventura social donde la astucia y la deducción son tus mejores armas.
    </p>
    
    
    <!-- Llamada adicional -->
    <div class="mt-16 pt-8 border-t border-white/20">
      <p class="text-blue-200 dark:text-blue-300 text-sm max-w-2xl mx-auto">
        No necesitás descargar nada. Jugá directamente desde tu navegador con amigos y familiares.
      </p>
    </div>
  </div>
</section>
</Layout>

<!-- Script para manejar todos los botones de "Comenzar Partida" -->
<script>
  // Configurar todos los botones de "Comenzar Partida" para redirigir a /jugar
  document.addEventListener('DOMContentLoaded', function() {
    // Función para manejar el botón de comenzar partida
    function handleStartGame() {
      // Redirigir a la página de jugar
      window.location.href = '/jugar';
    }
    
    // Sobrescribir la función global startGame si existe
    if (typeof window.startGame !== 'undefined') {
      window.startGame = handleStartGame;
    }
    
    // También crear una función global si no existe
    window.startGame = handleStartGame;
    
    // Configurar botones específicos por clase o ID
    const startButtons = document.querySelectorAll('[onclick*="startGame"], .start-game-btn, #startGameBtn');
    
    startButtons.forEach(button => {
      button.addEventListener('click', handleStartGame);
    });
    
    // Configurar botones que tengan texto específico
    const textButtons = document.querySelectorAll('button');
    textButtons.forEach(button => {
      if (button.textContent.includes('Comenzar Partida') || 
          button.textContent.includes('¡Comenzar Partida!') ||
          button.textContent.includes('Jugar Gratis')) {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          window.location.href = '/jugar';
        });
      }
    });
  });
</script>

<style>
  /* Estilos adicionales para los botones */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 2rem;
    border-radius: 0.75rem;
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 2px solid transparent;
    text-decoration: none;
  }
  
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }
</style>